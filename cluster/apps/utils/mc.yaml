apiVersion: v1
kind: Pod
metadata:
  name: mc
spec:
  containers:
  - name: mc
    image: minio/mc:RELEASE.2021-09-23T05-44-03Z@sha256:43620ad5c25f2a4e3b0e449ca1d65ab6759e3a0ff3b07d757112a59be432812c
    command: ["/usr/bin/sleep", "30d"]
    resources:
      limits:
        cpu: 250m
        memory: 500Mi
      requests:
        cpu: 10m
        memory: 50Mi
    volumeMounts:
    - name: config
      mountPath: "/root/.mc/"
  volumes:
  - name: config
    configMap:
      name: mc-config

---

apiVersion: v1
kind: ConfigMap
metadata:
  name: mc-config
data:
  config.json: |
    {
      version: "10",
      aliases: {
        "ceph": {
          "url": "http://rook-ceph-rgw-object-store.rook-ceph.svc.cluster.local",
          "accessKey": "${MINIO_ACCESS_KEY}",
          "secretKey": "${MINIO_SECRET_KEY}",
          "api": "S3v4",
          "path": "auto"
        }
      }
    }
